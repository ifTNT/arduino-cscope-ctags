before_install:
  - sudo apt-get update
  # Cscope and ctags
  - sudo apt install cscope exuberant-ctags
  # Latest version of arduino-cli
  - curl -fsSL https://raw.githubusercontent.com/arduino/arduino-cli/master/install.sh | BINDIR=/usr/local/bin sudo sh
  # Install arduino-esp32 for testing
  - sudo arduino-cli core install --additional-urls https://raw.githubusercontent.com/espressif/arduino-esp32/gh-pages/package_esp32_index.json esp32:esp32@1.0.6
language: python
python:
  - "3.4"
  - "3.5"
  - "3.6"
  - "3.7"
  - "3.8"
  - "3.9"
  - "3.9-dev" # 3.9 development branch
  - "nightly" # nightly build
# command to install dependencies
install:
  - sudo pip install -r requirements.txt
  - sudo ln -s ${PWD}/arduino-cscope-ctags /usr/local/bin/
# command to run tests
script:
  - pytest "test/"
